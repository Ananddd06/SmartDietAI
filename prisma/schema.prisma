generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String     @id @default(cuid()) // internal Prisma id
  clerkId            String     @unique // Clerk-provided user ID
  email              String     @unique
  name               String?
  age                Int?
  gender             String?
  height             Float?
  weight             Float?
  goal               String?
  createdAt          DateTime   @default(now())
  onboardingComplete Boolean    @default(false)
  updatedAt          DateTime   @updatedAt
  dailyLogs          DailyLog[] @relation("UserLogs")
}

model DailyLog {
  id             String   @id @default(cuid())
  userId         String // references clerkId
  date           DateTime @db.Date
  steps          Int      @default(0)
  completed      Boolean  @default(false)
  score          Int      @default(0)
  dietPlan       String?
  waterIntake    Float    @default(0)
  mealsCompleted Int      @default(0)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  user User @relation("UserLogs", fields: [userId], references: [clerkId], onDelete: Cascade)

  @@unique([userId, date])
}
